---
title: "函数传参是在传什么？"
date: 2024-7-24 8:00:00 +0800
categories: [Python Features]
tags: [Python]
---

这篇文章我想要回答一个问题，函数传参时实际在传什么，为什么有时候我们传入的东西不一样，对参数的行为也不一样。

为了解答这个问题，我们有必要从 Python 变量到底是什么开始。

## 变量都是引用

首先需要明确一点，Python 中所有的变量都是引用。那么什么是引用，我们打一个简单的比方。

这里有一个对象，是一个列表 `[1,2,3]`。

![](/assets/img/assignment1.png)

当我们将这个对象和一个变量绑定时，比如说绑定到 x 上时，就像往这个对象上贴了一个标签。

![](/assets/img/assignment2.png)

一个对象可以不止贴一个标签，我还可以写 `y=x` 来给这个对象贴上标签 y。

![](/assets/img/assignment3.png)

那么了解了这个基本知识后，再看看当操作变量时会发生什么。

## 通过引用改变值

Python 的对象分为可变对象和不可变对象，当我们修改变量时，可变对象和不可变对象的反应是不一样的。

分别定义一个可变对象列表，和一个不可变对象字符串，来演示。打印一下它们原本的 id。每个对象只会有一个 id，我们可以通过 id 有没有变化来判断是否是同一个对象。

![](/assets/img/id1.png)

然后修改一下这两个变量，再次查看这两个变量所指向的对象 id。

![](/assets/img/id2.png)

你可以看到，对于列表这样的可变对象来说，修改变量 id 没有变化，而字符串，也就是不可变对象在修改变量后 id 变了。你可以将这个字符串 id 变化的过程理解为，标签从这个对象取下，然后贴在了另一个对象上。

这一点非常重要，我想再重复一遍。当改变变量时，如果变量引用的是可变对象时，可以直接改变对象的值，当引用的是不可变对象，会创建一个新的对象。

那么，当函数传参时，发生了什么。

## 传参传递的是引用

函数传参就是给对象再贴一个标签。我们来定义一个函数，看看传入进去的对象 id 是什么。

![](/assets/img/id3.png)

通过这个例子可以看到，传入函数后，对象的 id 都没有变化。

刚刚说过，改变绑定了可变对象的变量时，会直接改变对象；如果不可变对象的变量，会新建一个对象。这在函数内部也是成立的，我们来让这个函数修改参数的值，再次打印 id 看看。

![](/assets/img/id4.png)

## 最后

这个技巧可能没有办法立刻用在你的代码中，但明白这个逻辑可以让你识别出很多不那么明显的问题。希望对你有帮助。