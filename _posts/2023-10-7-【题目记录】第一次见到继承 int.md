---
title: 【题目记录】第一次见到继承 int
date: 2023-10-7 21:00:00 +0800
categories: [Python]
tags: [OOP, codewars, question]
pin: false
---

今天在 codewars 遇到了一个[有趣的题目](https://www.codewars.com/kata/539a0e4d85e3425cb0000a88/train/python)，需要定义一个名为 `add` 的函数实现以下效果。

```python
add(1)(2) # equals 3
add(1)(2)(3) # 6
add(1)(2)(3)(4); # 10
add(1)(2)(3)(4)(5) # 15

addTwo = add(2)
addTwo # 2
addTwo + 5 # 7
addTwo(3) # 5
addTwo(3)(5) # 10
```

初步分析可以看出 `add(x)` 这个对象既可以像整数一样做加法，也可以像函数一样被调用。所以自然想到，用一个带有 `_call_` 方法的、继承 `int` 的类来实现。 

```python
class add(int):
   def __call__(self, n):
      return add(self + n)
```

但我一开始其实是写了这样一个类，没有考虑到可以直接继承 `int` 。

```python
class add:
    def __init__(self, value):
        self.value = value

    def __call__(self, num):
        return add(self.value + num)

    def __add__(self, other):
        if isinstance(other, add):
            return add(self.value + other.value)
        else:
            return add(self.value + other)

    def __repr__(self):
        return str(self.value)
```

算是第一次见识到了继承 `int` `str` 类的用途。