---
title: 如何用 git 进行版本回滚
date: 2023-11-14 12:00:00 +0800
categories: [git]
tags: [git]
---

这篇文章介绍了如何使用 *git* 进行代码的版本回滚。

## 如何访问节点

无论是哪种，都需要了解怎么访问节点。有两种方式可以访问，一是通过绝对路径，二是通过相对路径。

### 绝对路径

绝对路径即每次 commit 的哈希值，通过 git log 查看。

```bash
git checkout C1 # C1 是简化的哈希值，一般情况下都很长
```

### 相对路径

使用 `^` 和 `~` 来指示要去的地方在 HEAD 上面的第几个节点。

`HEAD^` 是上面一个节点，`HEAD~2` 是上面两个节点。

```bash
git checkout HEAD^ # 回到上一个节点
git checkout HEAD~3 # 回到上 3 个节点
```

HEAD 是一个指向当前所在分支的指针，总是指向当前分支上最近一次提交记录。

## 如何回到节点

### 让已有的分支跳回去

假设想要让 *master* 分支回到 *C1* 节点，可以这样做

```bash
git branch -f master C1 # 让 master 到哈希值为 C1 的节点
```

如果已经处于 *head* 分离，*head* 已经在 *C1* 了，就不用再填写哈希值。**但是要记得移动完分支之后 *checkout* 到分支上，不然会继续处于 head 分离的状态。**

```bash
git branch -f master
```

### 创造新的历史交叉点

如果要用新的分支，将上面的 `git branch -f` 换成创建新分支的指令就可以了，这样的指令有很多。

```bash
git checkout -b new_branch C1
git branch new_branch C1
git switch -c new_branch C1
```

### 创建一个回滚到某一版本的新 *commit*

这个方法实际是 *head* 继续前进，这是新的节点是过去的内容。

```bash
git revert C1
```